(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,t,a){e.exports=a(432)},428:function(e,t,a){},432:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(34),o=a.n(s),c=a(31),l=a(7),i=a(192),u=(a(201),{FETCH_USER:"FETCH_USER",SET_USER:"SET_USER_ACTION",UNSET_USER:"UNSET_USER_ACTION",REQUEST_START:"REQUEST_START_USER_ACTION",REQUEST_DONE:"REQUEST_DONE_USER_ACTION",LOGOUT:"LOGOUT",USER_FETCH_FAILED:"USER_FETCH_FAILED"}),p=Object(c.c)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.SET_USER:return t.user.id||e;case u.UNSET_USER:return null;default:return e}},userName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.SET_USER:return t.user.username||e;case u.UNSET_USER:return null;default:return e}},isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case u.REQUEST_START:return!0;case u.REQUEST_DONE:return!1;default:return e}}}),d={LOGIN:"LOGIN",CLEAR_LOGIN_ERROR:"CLEAR_LOGIN_ERROR",REQUEST_START:"REQUEST_START",LOGIN_REQUEST_DONE:"LOGIN_REQUEST_DONE",LOGIN_FAILED:"LOGIN_FAILED",LOGIN_FAILED_NO_CODE:"LOGIN_FAILED_NO_CODE",INPUT_ERROR:"INPUT_ERROR",LOGOUT:"LOGOUT"},m=function(e,t){return{type:d.LOGIN,payload:{username:e,password:t}}},h=function(){return{type:d.LOGOUT}};var E=Object(c.c)({isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case d.REQUEST_START:return!0;case d.LOGIN_REQUEST_DONE:return!1;default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.CLEAR_LOGIN_ERROR:return"";case d.LOGIN_FAILED:return"Ooops! The username and password didn't match. Try again!";case d.LOGIN_FAILED_NO_CODE:return"Ooops! Something went wrong! Is the server running?";case d.INPUT_ERROR:return t.payload;default:return e}}}),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROUTE":return t.payload;case"CLEAR_ROUTE":return{};default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CHECKPOINTS":return t.payload;case"CLEAR_CHECKPOINTS":return[];default:return e}},y=a(63),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLAYGROUNDS":return Object(y.a)(e).concat(Object(y.a)(t.payload));case"CLEAR_PLAYGROUNDS":return[];default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PARKS":return t.payload;case"CLEAR_PARKS":return[];default:return e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERNAMES":return t.payload;default:return e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case"SWITCH_PROXY":return(e+1)%3;default:return e}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_API_KEY":return t.payload;default:return e}},_=Object(c.c)({user:p,login:E,route:g,APIkey:k,checkpoints:f,playgrounds:b,parksInState:O,usernames:v,proxy:S}),R=a(9),w=a(10),j=a(12),C=a(11),T=a(13),N=a(434),x=a(436),A=a(435),I=a(437),P=function(e){function t(){return Object(R.a)(this,t),Object(j.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e,t=this.props.component;return e=this.props.loginPending||this.props.user.isLoading?r.a.createElement("p",null,"LOADING..."):this.props.user.isLoading||this.props.user.id?r.a.createElement(t,null):r.a.createElement(A.a,{to:"/home"}),r.a.createElement(I.a,{path:this.props.path,render:function(){return e}})}}]),t}(n.Component),L=Object(l.b)(function(e){return{user:e.user,loginPending:e.login.isLoading}})(P),U=function(e){var t=e.title;return r.a.createElement("div",{className:"instructions"},r.a.createElement("div",null,r.a.createElement("h1",{className:"lead"},t)))},D=a(33),G=a(433),M=function(){return r.a.createElement("div",{className:"navbar"},r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(G.a,{to:"/search"},"Search Page")),r.a.createElement("li",null,r.a.createElement(G.a,{to:"/search_by_State"},"Search by State")),r.a.createElement("li",null,r.a.createElement(G.a,{to:"/add_playground"},"Add Playground")))))},F=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(j.a)(this,Object(C.a)(t).call(this,e))).login=function(e){e.preventDefault(),""===a.state.username||""===a.state.password?a.props.dispatch({type:d.INPUT_ERROR,payload:"Enter your username and password!"}):(a.props.dispatch(m(a.state.username,a.state.password)),a.props.history.push("/search"))},a.handleInputChangeFor=function(e){return function(t){a.setState(Object(D.a)({},e,t.target.value))}},a.state={username:"",password:""},a}return Object(T.a)(t,e),Object(w.a)(t,[{key:"renderAlert",value:function(){return""!==this.props.login.message?r.a.createElement("h2",{className:"alert",role:"alert"},this.props.login.message):r.a.createElement("span",null)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(M,null),this.renderAlert(),r.a.createElement("form",{onSubmit:this.login,style:{color:"black"}},r.a.createElement("h1",null,"Login"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"Username:",r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInputChangeFor("username")}))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password"},"Password:",r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleInputChangeFor("password")}))),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",name:"submit",value:"Log In"}),r.a.createElement(G.a,{to:"/register"},"Register"))))}}]),t}(n.Component),Y=Object(l.b)(function(e){return{user:e.user,login:e.login}})(F),H=a(14),z=a.n(H),K=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(j.a)(this,Object(C.a)(t).call(this,e))).registerUser=function(e){if(e.preventDefault(),""===a.state.username||""===a.state.password)a.setState({message:"Choose a username and password!"});else{var t={username:a.state.username,password:a.state.password};z.a.post("/api/user/register/",t).then(function(e){201===e.status?a.props.history.push("/home"):a.setState({message:"Ooops! That didn't work. The username might already be taken. Try again!"})}).catch(function(){a.setState({message:"Ooops! Something went wrong! Is the server running?"})})}},a.handleInputChangeFor=function(e){return function(t){a.setState(Object(D.a)({},e,t.target.value))}},a.state={username:"",password:"",message:""},a}return Object(T.a)(t,e),Object(w.a)(t,[{key:"renderAlert",value:function(){return""!==this.state.message?r.a.createElement("h2",{className:"alert",role:"alert",style:{color:"black"}},this.state.message):r.a.createElement("span",null)}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderAlert(),r.a.createElement("form",{onSubmit:this.registerUser,style:{color:"black"}},r.a.createElement("h1",null,"Register User"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"Username:",r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInputChangeFor("username")}))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password"},"Password:",r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleInputChangeFor("password")}))),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",name:"submit",value:"Register"}),r.a.createElement(G.a,{to:"/home"},"Cancel"))))}}]),t}(n.Component),Q=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(j.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).clearStore=function(){console.log("Clear reduxStore"),a.props.dispatch({type:"CLEAR_PLAYGROUNDS"}),a.props.dispatch({type:"CLEAR_PARKS"}),a.props.dispatch({type:"CLEAR_CHECKPOINTS"}),a.props.dispatch({type:"CLEAR_ROUTE"})},a.logout=function(){a.props.dispatch(h())},a}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{width:"40%",marginRight:"auto",marginLeft:"30%"}},r.a.createElement("div",null,r.a.createElement("ul",null,this.props.user.userName?r.a.createElement("li",null):r.a.createElement("li",null,r.a.createElement(G.a,{to:"/"},"Login")),r.a.createElement("li",null,r.a.createElement(G.a,{to:"/search",onClick:this.clearStore},"Search Page")),r.a.createElement("li",null,r.a.createElement(G.a,{to:"/search_by_State",onClick:this.clearStore},"Search by State")),r.a.createElement("li",null,r.a.createElement(G.a,{to:"/add_playground",onClick:this.clearStore},"Add Playground")),this.props.user.userName&&r.a.createElement("li",{onClick:this.logout},r.a.createElement(G.a,{to:"/",onClick:this.clearStore},"Logout")))))}}]),t}(r.a.Component),W=Object(l.b)(function(e){return{user:e.user}})(Q),B=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(j.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).logout=function(){a.props.dispatch(h())},a}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=null;return this.props.user.userName&&(e=r.a.createElement("div",null,r.a.createElement("h1",{id:"welcome"},"Welcome, ",this.props.user.userName,"!"),r.a.createElement("p",null,"Your ID is: ",this.props.user.id),r.a.createElement("button",{onClick:this.logout},"Log Out"))),r.a.createElement("div",null,r.a.createElement(W,null),e)}}]),t}(n.Component),V=Object(l.b)(function(e){return{user:e.user}})(B),q=a(40),J=a(22),X=function(e){return e*Math.PI/180},Z=function(e,t){var a=X(e.lat),n=X(t.lat),r=a-n,s=X(e.lng)-X(t.lng);return 2*Math.asin(Math.sqrt(Math.pow(Math.sin(r/2),2)+Math.cos(a)*Math.cos(n)*Math.pow(Math.sin(s/2),2)))*6371e3},$={CLEAR_PLAYGROUNDS:"CLEAR_PLAYGROUNDS",SEARCH_PLAYGROUNDS:"SEARCH_PLAYGROUNDS"},ee="https://causeofaction.org/wp-content/uploads/2013/09/Not-available.gif",te=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(j.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={selectedMarker:{},address:"",waypoints:[],instructions:[],directions:{}},a.componentDidMount=function(){0===a.props.state.usernames.length&&a.props.dispatch({type:"GET_USERNAMES"})},a.routesEqual=function(e,t){return e.origin===t.origin&&e.destination===t.destination&&e.radius===t.radius},a.onMarkerClick=function(e){a.setState({selectedMarker:e}),z.a.get("/api/park/check_database/".concat(e.id)).then(function(t){t.data.length>0&&(console.log("Park is already in the database!"),a.setState({selectedMarker:Object(q.a)({},e,{description:t.data[0].description,user_id:t.data[0].user_id})}),ee=t.data[0].photo_reference),ee=e.photoReference?"https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=".concat(e.photoReference,"&sensor=false&key=").concat(a.props.state.APIkey):"https://causeofaction.org/wp-content/uploads/2013/09/Not-available.gif",(new google.maps.Geocoder).geocode({placeId:e.id},function(t,n){if("OK"===n)if(t[0]){console.log("results:",t);var r=t[0].address_components.filter(function(e){return"administrative_area_level_1"===e.types[0]})[0].short_name;console.log("State:",r),a.props.dispatch({type:"POST_PLAYGROUND",payload:Object(q.a)({},e,{photoReference:ee,state:r})}),a.setState({address:t[0].formatted_address})}else window.alert("No results found");else window.alert("Geocoder failed due to: "+n)})})},a.plotRouteAndParks=function(e){(new google.maps.DirectionsService).route({origin:e.origin,destination:e.destination,travelMode:google.maps.TravelMode.DRIVING},function(t,n){if(n===google.maps.DirectionsStatus.OK){a.setState({directions:t});for(var r=new google.maps.Polyline({path:[]}),s=t.routes[0].legs,o=0;o<s.length;o++)for(var c=s[o].steps,l=0;l<c.length;l++)for(var i=c[l].path,u=0;u<i.length;u++)r.getPath().push(i[u]);console.log("Polyline keys:",Object.keys(r.latLngs));var p,d={lat:r.latLngs.j[0].j[0].lat(),lng:r.latLngs.j[0].j[0].lng()},m=[],h=d,E=!0,g=!1,f=void 0;try{for(var y,b=r.latLngs.j[0].j[Symbol.iterator]();!(E=(y=b.next()).done);E=!0){var O=y.value;p=h,h={lat:O.lat(),lng:O.lng()},Z(h,p),Z(h,d)>1.5*e.radius&&(d=h,m.push(d),a.setState({searchAt:m.concat([d])}),a.props.dispatch({type:$.SEARCH_PLAYGROUNDS,payload:d,radius:e.radius}))}}catch(v){g=!0,f=v}finally{try{E||null==b.return||b.return()}finally{if(g)throw f}}console.log("We search at:",m),a.props.dispatch({type:"SET_CHECKPOINTS",payload:m})}else console.error("error fetching directions ".concat(t))})},a.addPark=function(){a.setState({waypoints:Object(y.a)(a.state.waypoints).concat([{location:a.state.address,name:a.state.selectedMarker.name}])})},a.routeWithWaypoints=function(e){(new google.maps.DirectionsService).route({origin:e.origin,destination:e.destination,waypoints:a.state.waypoints.map(function(e){return{location:e.location}}),optimizeWaypoints:!0,travelMode:google.maps.TravelMode.DRIVING},function(e,t){if(t===google.maps.DirectionsStatus.OK){a.props.dispatch({type:$.CLEAR_PLAYGROUNDS}),a.setState({directions:e}),console.log(a.state.directions);var n=e.routes[0].legs,r=[],s=!0,o=!1,c=void 0;try{for(var l,i=n[Symbol.iterator]();!(s=(l=i.next()).done);s=!0)for(var u=l.value,p=0;p<u.steps.length;p++)p===u.steps.length-1?r.push({text:u.steps[p].instructions,distance:u.steps[p].distance.text,finalStep:!0}):r.push({text:u.steps[p].instructions,distance:u.steps[p].distance.text,finalStep:!1})}catch(d){o=!0,c=d}finally{try{s||null==i.return||i.return()}finally{if(o)throw c}}a.setState({instructions:r})}else console.error("error fetching directions ".concat(e))})},a.strip=function(e){var t=document.createElement("DIV");t.innerHTML=e;var a=t.textContent||t.innerText||"",n={Destination:". Destination",Continue:" Continue",Entering:". Entering",Pass:". Pass"};return a.replace(/Destination|Continue|Entering|Pass/,function(e){return n[e]})},a.switchProxy=function(){a.props.dispatch({type:"SWITCH_PROXY"})},a}return Object(T.a)(t,e),Object(w.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.routesEqual(e.state.route,this.props.state.route))return null;this.plotRouteAndParks(this.props.state.route)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(J.GoogleMap,{defaultCenter:this.props.location,defaultZoom:4},this.state.directions&&r.a.createElement(J.DirectionsRenderer,{directions:this.state.directions}),this.props.state.playgrounds.map(function(t,a){return r.a.createElement(J.Marker,{key:a,position:t.location,title:t.name,onClick:function(){return e.onMarkerClick(t)}})}),this.props.state.checkpoints.map(function(t,a){return r.a.createElement(J.Circle,{key:a,center:t,radius:e.props.state.route.radius,options:{fillOpacity:"0.1",strokeColor:"green",strokeOpacity:"0.1"}})})),r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("h3",{onClick:this.switchProxy,style:{width:"50%",marginLeft:"30%"}},r.a.createElement("font",{size:"+3"},r.a.createElement("b",null,"Click a Marker for More Info"))),r.a.createElement("div",{className:"row justify-content-between"},this.state.selectedMarker.name&&r.a.createElement("div",{className:"col-5 card"},r.a.createElement("h4",{style:{textAlign:"center"}},this.state.selectedMarker.name),r.a.createElement("p",{style:{textAlign:"center"}},this.state.address),r.a.createElement("img",{src:ee,alt:"park",style:{maxWidth:"300px",margin:"auto"}}),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.addPark,className:"btn btn-secondary"},"Add this park to your trip"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return e.routeWithWaypoints(e.props.state.route)},className:"btn btn-secondary"},"Map your new route"),this.state.waypoints.length>0&&r.a.createElement("div",{style:{maxWidth:"300px",margin:"auto"}},r.a.createElement("p",null,"Parks on Your Route:"),r.a.createElement("table",null,r.a.createElement("tbody",null,this.state.waypoints.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.name))}))))),r.a.createElement("br",null),this.state.selectedMarker.name&&r.a.createElement("div",{className:"col-6 card",style:{color:"black"}},r.a.createElement("h3",{style:{textAlign:"center"}},"User Reviews"),this.state.selectedMarker.description&&r.a.createElement("table",null,r.a.createElement("tbody",{style:{color:"black"}},this.state.selectedMarker.description.map(function(t,a){return r.a.createElement("div",null,r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement("b",null,r.a.createElement("font",{size:"+1"},e.props.state.usernames[e.state.selectedMarker.user_id[a]-1])))),r.a.createElement("tr",{key:100*(a+1)},r.a.createElement("td",null,r.a.createElement("font",{size:"-1"},t))),r.a.createElement("tr",{key:200*(a+2)},r.a.createElement("td",null)))})))))),r.a.createElement("table",{style:{background:"linear-gradient(-45deg,green,white)",color:"black"}},r.a.createElement("tbody",null,this.state.instructions.map(function(t,a){return t.finalStep?r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement("b",null,r.a.createElement("font",{size:"+2"},e.strip(t.text)))),r.a.createElement("td",null,t.distance)):r.a.createElement("tr",{key:a},r.a.createElement("td",null,e.strip(t.text)),r.a.createElement("td",null,t.distance))})))),r.a.createElement("br",null),r.a.createElement("br",null))}}]),t}(n.Component),ae=Object(l.b)(function(e){return{state:e}})(Object(J.withScriptjs)(Object(J.withGoogleMap)(te))),ne=function(e){return 1609.344*e},re=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(j.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={origin:"",destination:"",radius:0,submitted:!1},a.handleChange=function(e){return function(t){"radius"===e?a.setState({radius:ne(t.target.value)}):a.setState(Object(D.a)({},e,t.target.value))}},a.handleSubmit=function(e){e.preventDefault(),a.props.dispatch({type:$.CLEAR_PLAYGROUNDS}),console.log("State:",a.state),a.setState({submitted:!a.state.submitted}),a.props.dispatch({type:"SET_ROUTE",payload:a.state})},a}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:"autocomplete"},r.a.createElement("h2",{style:{margin:"auto",color:"black"}},"Where are you going?"),r.a.createElement("input",{placeholder:"Origin",id:"origin",type:"text",onChange:this.handleChange("origin")}),r.a.createElement("input",{placeholder:"Destination",id:"destination",type:"text",onChange:this.handleChange("destination")})," ",r.a.createElement("input",{placeholder:"Search Radius (miles)",type:"number",onChange:this.handleChange("radius")}),r.a.createElement("input",{type:"submit"})))}}]),t}(n.Component),se=Object(l.b)()(re),oe=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(j.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={url:"https://maps.googleapis.com/maps/api/js?key=".concat(a.props.APIkey,"&v=3.exp&libraries=geometry,drawing,places")},a}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement(se,{url:this.state.url}),r.a.createElement(ae,{googleMapURL:this.state.url,loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px",maxWidth:"90%",margin:"auto"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),location:{lat:41,lng:-98}}))}}]),t}(n.Component),ce=Object(l.b)(function(e){return{APIkey:e.APIkey}})(oe),le=a(88),ie=a(42),ue=(a(185),function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(j.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={location:{lat:a.props.location.lat,lng:a.props.location.lng},selectedState:{center_lat:41,center_lng:-98,zoom:4},zoom:4,mapClicked:!1,name:"",description:"",state:"",allStates:[]},a.componentDidMount=function(){z.a.get("/api/states").then(function(e){a.setState({allStates:e.data})}).catch(function(e){console.log("Error in GET /states:",e)})},a.handleClick=function(e){a.setState({location:{lat:e.latLng.lat(),lng:e.latLng.lng()},selectedState:{center_lat:e.latLng.lat(),center_lng:e.latLng.lng(),zoom:a.gmap.props.zoom},zoom:Math.max(10,a.gmap.props.zoom),mapClicked:!0}),console.log("You clicked on",a.state)},a.handleChange=function(e){return function(t){a.setState(Object(D.a)({},e,t.target.value))}},a.handleStateSelection=function(e){a.setState({state:e.postal_code,selectedState:e})},a.handleSubmit=function(e){e.preventDefault(),console.log("Playground:",a.state),a.state.state&&a.state.name?(a.props.dispatch({type:"POST_PLAYGROUND",payload:Object(q.a)({},a.state,{photoReference:"https://causeofaction.org/wp-content/uploads/2013/09/Not-available.gif",added_by:a.props.user.id})}),console.log("payload:",Object(q.a)({},a.state,{photoReference:"https://causeofaction.org/wp-content/uploads/2013/09/Not-available.gif",added_by:a.props.user.id}))):alert("You must enter a name and choose the state"),a.setState({name:"",description:"",location:{lat:0,lng:0}}),ie.toast.success("Park submitted!",{position:ie.toast.POSITION.BOTTOM_RIGHT})},a}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(J.GoogleMap,{center:{lat:Number(this.state.selectedState.center_lat),lng:Number(this.state.selectedState.center_lng)},zoom:this.state.selectedState.zoom,onClick:this.handleClick,ref:function(t){return e.gmap=t}},this.state.mapClicked&&r.a.createElement(J.Marker,{position:this.state.location})),r.a.createElement("br",null),r.a.createElement("div",{style:{width:"300px",margin:"auto",color:"black"}},r.a.createElement(le.a,{options:this.state.allStates.map(function(e){return{label:e.full_name,value:e.id,selectedState:e}}),onChange:function(t){return e.handleStateSelection(t.selectedState)}})),r.a.createElement("br",null),this.state.mapClicked?r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-between"},r.a.createElement("div",{className:"col-6 card mx-auto"},r.a.createElement("div",{style:{display:"inline-block",width:"90%",margin:"auto"}},r.a.createElement("span",null,"Latitude"),r.a.createElement("input",{value:this.state.location.lat.toFixed(3),readOnly:"readOnly",className:"col-sm-3"}),r.a.createElement("span",null,"Longitude"),r.a.createElement("input",{value:this.state.location.lng.toFixed(3),readOnly:"readOnly",className:"col-sm-3"})),r.a.createElement("input",{onChange:this.handleChange("name"),value:this.state.name,style:{width:"330px",margin:"auto"},placeholder:"Playground Name"}),r.a.createElement("br",null),r.a.createElement("textarea",{rows:"4",cols:"40",form:"playgroundForm",onChange:this.handleChange("description"),value:this.state.description,placeholder:"Description",style:{margin:"auto"}}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-secondary",onClick:this.handleSubmit},"Submit"))))):r.a.createElement("p",null),r.a.createElement(ie.ToastContainer,{position:"bottom-right",autoClose:2e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!1,draggable:!1,pauseOnHover:!0}))}}]),t}(n.Component)),pe=Object(l.b)()(Object(J.withScriptjs)(Object(J.withGoogleMap)(ue))),de=Object(l.b)(function(e){return{user:e.user,APIkey:e.APIkey}})(function(e){return r.a.createElement("div",null,e.user.userName?r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement(pe,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(e.APIkey,"&v=3.exp&libraries=geometry,drawing,places"),loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px",maxWidth:"800px",margin:"auto"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),location:{lat:41,lng:-98},user:e.user})):r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement("p",null,"Login to add a playground")))}),me=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(j.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={selectedState:{center_lat:41,center_lng:-98,zoom:4},selectedPark:{},description:"",addDescription:!1,allStates:[],initialRender:!0},a.componentDidMount=function(){z.a.get("/api/states").then(function(e){a.setState({allStates:e.data})}).catch(function(e){console.log("Error in GET /states:",e)}),0===a.props.usernames.length&&a.props.dispatch({type:"GET_USERNAMES"})},a.componentWillReceiveProps=function(e){if(a.state.initialRender||e.parks.length*a.props.parks.length===0)return a.setState({initialRender:!1}),null;if(a.props.parks[0].state!==e.parks[0].state)return null;for(var t,n=!1,r=0;r<a.props.parks.length;r++){var s=a.props.parks[r].description||[],o=e.parks[r].description||[];s.length<o.length&&(n=!0,t=r)}n&&a.state.selectedPark.id&&(a.setState({selectedState:a.state.selectedState,selectedPark:e.parks[t]}),a.setState({addDescription:!1}))},a.handleChange=function(e){a.setState({selectedState:e}),a.props.dispatch({type:"GET_PARKS_IN_STATE",payload:e.postal_code}),a.waitToDisplay()},a.waitToDisplay=function(){setTimeout(function(){ie.toast.info("".concat(a.props.parks.length," parks in ").concat(a.state.selectedState.full_name),{position:ie.toast.POSITION.BOTTOM_RIGHT})},1e3)},a.handleClick=function(e){a.setState({selectedPark:e}),a.setState({selectedState:Object(q.a)({},a.state.selectedState,{center_lat:Number(e.latitude),center_lng:Number(e.longitude)})})},a.setDescription=function(e){a.setState({description:e.target.value})},a.handleSubmit=function(){var e=null===a.state.selectedPark.description;a.props.dispatch({type:"ADD_DESCRIPTION",payload:{userId:a.props.user.id,park:a.state.selectedPark.id,description:a.state.description,postal_code:a.state.selectedState.postal_code,firstReview:e}}),a.setState({addDescription:!1})},a}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{style:{width:"300px",margin:"auto"}},r.a.createElement("br",null),r.a.createElement(le.a,{options:this.state.allStates.map(function(e){return{label:e.full_name,value:e.id,selectedState:e}}),onChange:function(t){return e.handleChange(t.selectedState)},className:"select"})),r.a.createElement(J.GoogleMap,{center:{lat:Number(this.state.selectedState.center_lat),lng:Number(this.state.selectedState.center_lng)},zoom:this.state.selectedState.zoom},this.props.parks.map(function(t){return r.a.createElement(J.Marker,{key:t.id,position:{lat:Number(t.latitude),lng:Number(t.longitude)},title:t.name,onClick:function(){return e.handleClick(t)}})})),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-between"},this.state.selectedPark.name&&r.a.createElement("div",{className:"col-5 card"},r.a.createElement("h4",{style:{textAlign:"center"}},this.state.selectedPark.name),r.a.createElement("img",{src:this.state.selectedPark.photo_reference,style:{maxWidth:"300px",margin:"auto"}}),r.a.createElement("br",null)),this.state.selectedPark.name?r.a.createElement("div",{className:"col-6 card",style:{color:"black"}},r.a.createElement("h3",{style:{textAlign:"center"}},"User Reviews"),this.state.selectedPark.description&&r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("tbody",{style:{color:"black"}},this.state.selectedPark.description.map(function(t,a){return r.a.createElement("div",null,r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement("b",null,r.a.createElement("font",{size:"+1"},e.props.usernames[e.state.selectedPark.user_id[a]-1])))),r.a.createElement("tr",{key:100*(a+1)},r.a.createElement("td",null,r.a.createElement("font",{size:"-1"},t))),r.a.createElement("tr",{key:200*(a+2)},r.a.createElement("td",null)))})))),!this.state.addDescription&&r.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return e.setState({addDescription:!0})}},"Add a review"),this.state.addDescription&&r.a.createElement("div",null,r.a.createElement("textarea",{rows:"4",cols:"40",onChange:this.setDescription}),r.a.createElement("button",{onClick:this.handleSubmit,className:"btn btn-secondary"},"Submit"))):r.a.createElement("noscript",null),r.a.createElement(ie.ToastContainer,{position:"bottom-right",autoClose:2e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!1,draggable:!1,pauseOnHover:!0}))))}}]),t}(n.Component),he=Object(l.b)(function(e){return{user:e.user,usernames:e.usernames,parks:e.parksInState}})(Object(J.withScriptjs)(Object(J.withGoogleMap)(me))),Ee=function(e){function t(){return Object(R.a)(this,t),Object(j.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement(he,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(this.props.APIkey,"&v=3.exp&libraries=places"),loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px",maxWidth:"800px",margin:"auto"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}))}}]),t}(n.Component),ge=Object(l.b)(function(e){return{APIkey:e.APIkey}})(Ee),fe=(a(428),function(e){function t(e){var a;return Object(R.a)(this,t),a=Object(j.a)(this,Object(C.a)(t).call(this,e)),e.dispatch({type:u.FETCH_USER}),e.dispatch({type:"GET_API_KEY"}),a}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(U,{title:"Tiny Stretch"}),r.a.createElement(N.a,null,r.a.createElement(x.a,null,r.a.createElement(A.a,{exact:!0,from:"/",to:"/home"}),r.a.createElement(I.a,{path:"/home",component:Y}),r.a.createElement(I.a,{path:"/register",component:K}),r.a.createElement(L,{path:"/user",component:V}),r.a.createElement(I.a,{path:"/search",component:ce}),r.a.createElement(I.a,{path:"/add_playground",component:de}),r.a.createElement(I.a,{path:"/search_by_state",component:ge}),r.a.createElement(I.a,{render:function(){return r.a.createElement("h1",null,"404")}}))))}}]),t}(n.Component)),ye=Object(l.b)()(fe),be=a(5),Oe=a.n(be),ve=a(4);var Se=Oe.a.mark(_e),ke=Oe.a.mark(Re);function _e(){var e;return Oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ve.b)({type:u.REQUEST_START});case 3:return t.next=5,z.a.get("api/user",{headers:{"Content-Type":"application/json"},withCredentials:!0}).then(function(e){return e.data}).catch(function(e){throw e.response||e});case 5:return e=t.sent,t.next=8,Object(ve.b)({type:u.SET_USER,user:e});case 8:return t.next=10,Object(ve.b)({type:u.REQUEST_DONE});case 10:t.next=18;break;case 12:return t.prev=12,t.t0=t.catch(0),t.next=16,Object(ve.b)({type:u.REQUEST_DONE});case 16:return t.next=18,Object(ve.b)({type:u.USER_FETCH_FAILED,message:t.t0.data||"FORBIDDEN"});case 18:case"end":return t.stop()}},Se,this,[[0,12]])}function Re(){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.e)(u.FETCH_USER,_e);case 2:case"end":return e.stop()}},ke,this)}var we=Re;function je(e){var t={username:e.username,password:e.password};return z.a.post("api/user/login",t,{headers:{"Content-Type":"application/json"},withCredentials:!0}).then(function(e){return e.data}).catch(function(e){throw e.response||e})}var Ce=Oe.a.mark(xe),Te=Oe.a.mark(Ae),Ne=Oe.a.mark(Ie);function xe(e){return Oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ve.b)({type:d.CLEAR_LOGIN_ERROR});case 3:return t.next=5,Object(ve.b)({type:d.REQUEST_START});case 5:return t.next=7,je(e.payload);case 7:return t.next=9,Object(ve.b)({type:u.FETCH_USER});case 9:return t.next=11,Object(ve.b)({type:d.LOGIN_REQUEST_DONE});case 11:t.next=24;break;case 13:return t.prev=13,t.t0=t.catch(0),t.next=17,Object(ve.b)({type:d.LOGIN_REQUEST_DONE});case 17:if(401!==t.t0.status){t.next=22;break}return t.next=20,Object(ve.b)({type:d.LOGIN_FAILED,message:t.t0.message});case 20:t.next=24;break;case 22:return t.next=24,Object(ve.b)({type:d.LOGIN_FAILED_NO_CODE,message:t.t0.message});case 24:case"end":return t.stop()}},Ce,this,[[0,13]])}function Ae(e){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.a.get("api/user/logout",{headers:{"Content-Type":"application/json"},withCredentials:!0}).then(function(e){return e.data}).catch(function(e){throw e.response||e});case 3:return e.next=5,Object(ve.b)({type:u.UNSET_USER});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("LOGOUT FAILED -- CHECK YOUR SERVER",e.t0);case 10:case"end":return e.stop()}},Te,this,[[0,7]])}function Ie(){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.e)(d.LOGIN,xe);case 2:return e.next=4,Object(ve.e)(d.LOGOUT,Ae);case 4:case"end":return e.stop()}},Ne,this)}var Pe=Ie,Le=["http://cors-anywhere.herokuapp.com/","https://cors.io/?","https://cors-proxy.htmldriven.com/?url="],Ue=function(e,t,a,n,r){return console.log("Current proxy:",Le[n]),z.a.get("".concat(Le[n],"https://maps.googleapis.com/maps/api/place/nearbysearch/json?type=park&keyword=playground&location=").concat(e,",").concat(t,"&radius=").concat(Math.max(1e4,a),"&key=").concat(r))},De=Oe.a.mark(ze),Ge=Oe.a.mark(Ke),Me=Oe.a.mark(Qe),Fe=Oe.a.mark(We),Ye=Oe.a.mark(Be),He=function(e){var t="";return e.photos&&(t=e.photos[0].photo_reference),{name:e.name,location:e.geometry.location,id:e.place_id,types:e.types,photoReference:t}};function ze(e){var t,a,n,r,s,o;return Oe.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(ve.c)(function(e){return e.proxy});case 3:return t=c.sent,c.next=6,Object(ve.c)(function(e){return e.APIkey});case 6:return a=c.sent,c.next=9,Ue(e.payload.lat,e.payload.lng,e.radius,t,a);case 9:return n=c.sent,r=n.data.results,s=[],r.length>0&&(s=r.map(function(e){return He(e)})),o=s.filter(function(t){return Z(t.location,e.payload)<e.radius&&!t.types.includes("campground")}),c.next=16,Object(ve.b)({type:"SET_PLAYGROUNDS",payload:o});case 16:c.next=21;break;case 18:c.prev=18,c.t0=c.catch(0),console.log("Error in searchParks:",c.t0);case 21:case"end":return c.stop()}},De,this,[[0,18]])}function Ke(e){return Oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z.a.post("/api/park",e.payload).then(function(e){console.log("Response:",e)});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("Error in postPlayground:",t.t0);case 8:case"end":return t.stop()}},Ge,this,[[0,5]])}function Qe(e){return Oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.payload.firstReview){t.next=6;break}return t.next=4,z.a.post("/api/park/description",e.payload);case 4:t.next=8;break;case 6:return t.next=8,z.a.put("/api/park",e.payload);case 8:return t.next=10,We({payload:e.payload.postal_code});case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log("Error in addDescription:",t.t0);case 15:case"end":return t.stop()}},Me,this,[[0,12]])}function We(e){var t,a;return Oe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,z.a.get("/api/park/".concat(e.payload));case 3:return t=n.sent,a=t.data,n.next=7,Object(ve.b)({type:"SET_PARKS",payload:a});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log("Error in getParksInState");case 12:case"end":return n.stop()}},Fe,this,[[0,9]])}function Be(){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.d)("SEARCH_PLAYGROUNDS",ze);case 2:return e.next=4,Object(ve.e)("POST_PLAYGROUND",Ke);case 4:return e.next=6,Object(ve.d)("ADD_DESCRIPTION",Qe);case 6:return e.next=8,Object(ve.d)("GET_PARKS_IN_STATE",We);case 8:case"end":return e.stop()}},Ye,this)}var Ve=Be,qe=Oe.a.mark(Xe),Je=Oe.a.mark(Ze);function Xe(){var e,t;return Oe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,z.a.get("/api/user/usernames");case 3:return e=a.sent,t=e.data.map(function(e){return e.username}),a.next=7,Object(ve.b)({type:"SET_USERNAMES",payload:t});case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("Error getting usernames:",a.t0);case 12:case"end":return a.stop()}},qe,this,[[0,9]])}function Ze(){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.d)("GET_USERNAMES",Xe);case 2:case"end":return e.stop()}},Je,this)}var $e=Ze,et=Oe.a.mark(at),tt=Oe.a.mark(nt);function at(){var e,t;return Oe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,z.a.get("/api/user/key");case 3:return e=a.sent,t=e.data,console.log("APIkey is:",t),a.next=8,Object(ve.b)({type:"SET_API_KEY",payload:t});case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log("Error getting API key:",a.t0);case 13:case"end":return a.stop()}},et,this,[[0,10]])}function nt(){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.d)("GET_API_KEY",at);case 2:case"end":return e.stop()}},tt,this)}var rt=nt,st=Oe.a.mark(ot);function ot(){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ve.a)([we(),Pe(),Ve(),$e(),rt()]);case 2:case"end":return e.stop()}},st,this)}var ct=[],lt=Object(i.a)();ct.push(lt);var it=Object(c.d)(_,{},c.a.apply(void 0,ct));lt.run(ot),o.a.render(r.a.createElement(l.a,{store:it},r.a.createElement(ye,null)),document.getElementById("react-root"))}},[[193,2,1]]]);
//# sourceMappingURL=main.10f6cee7.chunk.js.map